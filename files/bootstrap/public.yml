---
endpoints:
  - name: magnolia-public
    url: http://localhost:8080{{ .Env.MGNL_CONTEXT_PATH | default "/" }}
  - name: magnolia-author
    url: {{ .Env.MGNLBOOT_AUTHOR_INSTANCE }}

playbook:
  {{- if .Env.MGNL_DEFAULT_BASE_URL }}
  - name: setDefaultBaseURL
    endpoints:
      - magnolia-public
    method: "post"
    path: "config/server"
    data:
      properties:
        - name: defaultBaseUrl
          type: String
          values:
            - {{ .Env.MGNL_DEFAULT_BASE_URL | quote }}
  {{- end }}
